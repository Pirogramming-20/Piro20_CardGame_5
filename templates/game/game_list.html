{% extends 'base.html' %} {% load static %} {%block head%}
<link rel="stylesheet" href="{%static 'css/game/game_list.css'%}" />
<title>전적보기</title>{% endblock %} {%block content%}

<div id="description">
  당신의 게임 전적입니다.<br />전행 중인 게임은 취소할 수 있어요.
</div>
<div id="login-info">
  <p>현재 플레이어: {{user.username}}</p>
</div>
<div id="game-list">
  {% for user_game in user_games %}
  <div class="game">
    {% if user_game.attacker_id == user.id %}
    <div class="user-info">{{ forloop.counter }} - vs {{ user_game.defend_user.username }}</div>
    {% else %}
    <div class="user-info">{{ forloop.counter }} - vs {{ user_game.attack_user.username }}</div>
    {% endif %}
    {% if user_game.now == False %}
      {% if user_game.winner == user.username %}
      <div class="game-info">결과: 승리</div>
      {% else %}
      <div class="game-info">결과: 패배</div>
      {% endif %}
    {% else %}
      {% if user_game.attack_user == user.id %}
      <div class="game-info">
        진행중...
        <form action="{% url 'game:delete' user_game.id %}" method="post"><button>게임 취소</button></form>
      </div>
      {% else %}
      <a href="">반격하기</a>
      {% endif %}
    {% endif %}
    <a href="{% url 'game:detail' user_game.id %}?counter={{ forloop.counter }}">
      <div class="game-detail"><p>게임정보</p></div>
    </a>
  </div>
  {% endfor %}
</div>

{%endblock%}
